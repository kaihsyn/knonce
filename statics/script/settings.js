// Generated by CoffeeScript 1.5.0
(function() {
  var KL;

  KL = typeof exports !== "undefined" && exports !== null ? exports : this;

  KL.get_notebook_list = function() {
    $('#nb-select-name').hide();
    $('#nb-select-spin').show();
    $('#nb-select>select').html('');
    $('#nb [name="choose_notebook"]').val('true');
    return $.get('/settings/notebook_list').done(function(data) {
      var nb, _i, _len, _ref;
      _ref = data.notebooks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        nb = _ref[_i];
        $('#nb-select>select').append("<option value=\"" + nb.guid + "\">" + nb.name + "</option>");
      }
      return $('#nb-select>select').show();
    }).fail(function(data) {
      $('#nb-select-name').show();
      return $('#nb-select-msg').html('- Failed to load notebooks list.').show().delay(5000).hide();
    }).always(function(data) {
      return $('#nb-select-spin').hide();
    });
  };

  $('#menu a').click(function(e) {
    e.preventDefault();
    return $(this).tab('show');
  });

  $('.kl-tooltip').tooltip();

  $('#nb-select>.help-inline.only').on('click', 'a', function() {
    get_notebook_list();
    return false;
  });

  $('#nb').submit(function() {
    if ($('#nb [name="choose_notebook"]').val() === 'true') {
      $('#nb [name="notebook_name"]').val($("#nb-select>select>[value=\"" + ($('#nb-select>select').val()) + "\"]").html());
      $('#nb [name="notebook_guid"]').val($('#nb-select>select').val());
    }
    return false;
  });

  $('#f-acct-bio').change(function() {
    if ($('#f-acct-bio').val().length > 500) {
      $('#f-acct-bio-limit').addClass('red');
      $('#f-acct-bio-limit').removeClass('gray');
      return $('#f-acct-btn').addClass('disabled');
    } else {
      $('#f-acct-bio-limit').addClass('gray');
      $('#f-acct-bio-limit').removeClass('red');
      return $('#f-acct-btn').removeClass('disabled');
    }
  });

  $('#form-account').submit(function() {
    if ($('#f-acct-bio').val().length > 500) {
      $('#f-acct-msg').html('Length of bio exceeds the max limit.');
      return false;
    }
    return true;
  });

}).call(this);
